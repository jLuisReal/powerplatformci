name: Release action
# Call the reusable workflow release-solution-with-inputs.yml
# Release your solution to prod when you create a new release.

on:
  release:
      types: [created]        
permissions:
  contents: write
jobs:
  Release-solution-ALMLab:
    uses: ./.github/workflows/build-push-prod.yml
    with:
      solution_name: BasicApp
    secrets:
      DEV_CLIENT_SECRET: ${{ secrets.PowerPlatformSPN }}
      DEV_ENVIRONMENT_URL: ${{secrets.ENVIRONMENTURL}}
      DEV_CLIENT_ID: ${{secrets.CLIENT_ID}}
      DEV_TENANT_ID: ${{secrets.TENANT}} 

      PROD_CLIENT_SECRET: ${{ secrets.PROD_SECRET }}
      PROD_ENVIRONMENT_URL: ${{secrets.PROD_ENVIRONMENT_URL}}
      PROD_CLIENT_ID: ${{secrets.PROD_CLIENT_ID}}
      PROD_TENANT_ID: ${{secrets.PROD_TENANT}}  