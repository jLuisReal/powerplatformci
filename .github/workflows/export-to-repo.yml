name: export action
# Call the reusable workflow rexport-powerapp-ru.yml
# Adds your solution as code to your repository on a branch

on:
    workflow_dispatch:
      inputs: 
        solution_name:
          description: 'The solution name.'
          type: string
          default: BasicApp       
        solution_shipping_folder:
          description: 'folder name for staging the exported solution *do not change*'        
          type: string
          default: out/ship/
        solution_outbound_folder:
          description: 'staging the unpacked solution folder before check-in *do not change*'
          type: string
          default: out/solutions/
        solution_source_folder: 
         description: 'folder name to be created and checked in *do not change*'
         type: string
         default: solutions/
        solution_release_folder:
         description: 'folder where the released binaries are going to be hosted *do not change*'
         type: string
         default: out/release     
permissions:
    contents: write
jobs:
  Release-solution-ALMLab:
    uses: ./.github/workflows/export-powerapp-ru.yml
    with:
      env: dev
      solution_name: ${{inputs.solution_name}}
      solution_shipping_folder: ${{inputs.solution_shipping_folder}}
      solution_outbound_folder: ${{inputs.solution_outbound_folder}}
      solution_source_folder: ${{inputs.solution_outbound_folder}}
      solution_release_folder: ${{inputs.solution_release_folder}}
    secrets:
      CLIENT_SECRET: ${{ secrets.CLIENT_SECRET }}
      ENVIRONMENT_URL: ${{secrets.ENVIRONMENT_URL}}
      CLIENT_ID: ${{secrets.CLIENT_ID}}
      TENANT_ID: ${{secrets.TENANT_ID}}